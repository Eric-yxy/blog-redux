<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="./css/index.css">
    <script src = './js/jquery.min.js'></script>
    <script src="./js/jquery.cookie.js"></script>
    <script src="./js/dataComm.js"></script>
</head>
<body>
<iframe id="myIframe" name="iframe" width="0" height="0" frameborder="0"></iframe>
<img src="" alt="" id="preview">
<form target="iframe" action="/express/?do=express.user.uploadImg" enctype="multipart/form-data" method="post">
    <input type="file" name="upload"  multiple="multiple" accept="image/jpeg,image/jpg,image/png">
    <input type="submit" value="upload" id="firstSub"/>
    <input type="button" value="substitute" id ='substitute'>
    <input type="submit" value="another uploda" id="substituteSub" />
</form>


</body>
<script>
    $('#substitute').click(function(){
        $('input[name="upload"]').click();
    });

    $('input[name="upload"]').change(function(){
        setTimeout( function(){
            console.log('do');
            $('#firstSub').click();
        } , 100);
    })
    var callback = function(data){
        console.log(data);
    }
    function getLocalTime(str) {
        var date = new Date(parseInt(str) * 1000);
        var year = date.getFullYear();
        var month = date.getMonth()+1;
        var day= date.getDate();
        var hour= date.getHours();
        var minute= date.getMinutes();
        var second= date.getSeconds();
        return year+'-'+month+'-'+day+' '+hour+':'+minute;
    }

//    var promise = new Promise(function(resolve , err){
//        dataComm.login('yang' , 1234 , function(data){
//            resolve(data);
//        });
//    });
//    promise.then(function(data){
//        console.log(data);
//    }).then(function(){
//        console.log('doing');
//    });




        //upload img
        $('#myIframe').bind('load' , function(){
        var data = $(window.frames['iframe'].document.body).text();
          console.log(data);
    })

//    dataComm.login('yang' , 1234 , callback); //username , password , callback
//    dataComm.register('阿斯顿' , 1234 , function(){});
//    dataComm.isLogin('yang' , callback); //username
//    dataComm.loginOut('yang' , callback); //username
//    dataComm.getUserData('yang' , callback); //username , cb
//    dataComm.addOneBlog('yang' , Math.round(new Date().getTime()/1000) , 'personal' , 'this is blog content' , ['adsf'] , callback); //username , data , type , blog content , blog pic , callback
//    dataComm.getBlogList('personal' ,['yang'] , 5 , 0 , callback); // type , blogAuthorArray , blogNumber , rank callback
//    dataComm.addComment("58873f769ad2ab449eaf0004" , 'yang' , Math.round(new Date().getTime()/1000), 'this is comment example' ,  callback) //author , content , callback
//    dataComm.addLikes('yang' , '58873f769ad2ab449eaf0004' , callback);//username , blogId , callback
//    dataComm.addCollection('yang' , '58873f769ad2ab449eaf0004' , callback) //username , blogId , callback
//    dataComm.addAttention('eric' , 'yang' , callback); //user , attentionUserName , callback
//    dataComm.getComment('58873f769ad2ab449eaf0004' , callback);//blogId , callback
//    dataComm.updateUserDetail('yang' , {'realName' : 'yjp' , 'blood' : 'AB' , 'sex' : 2 , 'intro' : 'this is introduce text'} , callback) //username , userDetailData (obj) , cb
</script>
</html>